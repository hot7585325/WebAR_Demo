<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Quick Look 平面偵測</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }
        
        .header {
            margin-bottom: 40px;
        }
        
        .ar-preview {
            position: relative;
            margin: 20px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .ar-preview img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .ar-button {
            display: inline-block;
            background: #007AFF;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,122,255,0.3);
        }
        
        .ar-button:hover {
            background: #0051D5;
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(0,122,255,0.4);
        }
        
        .ar-button:active {
            transform: translateY(0);
        }
        
        .info-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .status {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            font-size: 14px;
        }
        
        .ios-only {
            background: linear-gradient(90deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
            margin: 10px 0;
            font-size: 12px;
            font-weight: bold;
        }
        
        .feature-list {
            text-align: left;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .feature-list h3 {
            margin-top: 0;
            color: #FFE066;
        }
        
        .feature-list ul {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .feature-list li:before {
            content: "✓ ";
            color: #4ECDC4;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 AR Quick Look 體驗</h1>
            <p>在 iOS 設備上體驗原生平面偵測</p>
            <div class="ios-only">僅限 iOS 12+ 設備</div>
        </div>

        <div class="info-card">
            <h2>📱 什麼是 AR Quick Look？</h2>
            <p>Apple 的原生 AR 技術，直接在 Safari 中提供平面偵測和物件放置功能，無需下載 App！</p>
        </div>

        <!-- AR 預覽區域 -->
        <div class="ar-preview">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 200'%3E%3Cdefs%3E%3ClinearGradient id='grad1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%234ECDC4;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%2344A08D;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23grad1)'/%3E%3Ctext x='50%25' y='40%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-size='24' font-family='Arial'%3E📦 3D 模型預覽%3C/text%3E%3Ctext x='50%25' y='60%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-size='16' font-family='Arial'%3E點擊下方按鈕開啟 AR%3C/text%3E%3C/svg%3E" alt="AR 模型預覽">
        </div>

        <!-- AR 體驗按鈕們 -->
        <div style="margin: 30px 0;">
            <!-- 注意: 這些 USDZ 文件是示例 URL，實際使用需要有效的 USDZ 文件 -->
            <a href="https://developer.apple.com/augmented-reality/quick-look/models/biplane/toy_biplane_idle.usdz" 
               class="ar-button" 
               rel="ar">
                🛩️ AR 飛機模型
            </a>
            
            <a href="https://developer.apple.com/augmented-reality/quick-look/models/drummertoy/toy_drummer_idle.usdz" 
               class="ar-button" 
               rel="ar">
                🥁 AR 鼓手玩具
            </a>
            
            <a href="https://developer.apple.com/augmented-reality/quick-look/models/retrotv/tv_retro.usdz" 
               class="ar-button" 
               rel="ar">
                📺 AR 復古電視
            </a>
        </div>

        <div class="feature-list">
            <h3>🎯 AR Quick Look 功能特色</h3>
            <ul>
                <li>自動平面偵測（地板、桌面等）</li>
                <li>真實光影和陰影效果</li>
                <li>手勢縮放和旋轉</li>
                <li>物理碰撞偵測</li>
                <li>高品質渲染效果</li>
                <li>無需下載額外 App</li>
            </ul>
        </div>

        <div class="status" id="status">
            <div id="device-info">正在偵測設備...</div>
            <div id="instructions" style="margin-top: 10px;"></div>
        </div>

        <div class="info-card">
            <h3>💡 使用說明</h3>
            <ol style="text-align: left; padding-left: 20px;">
                <li><strong>點擊任一 AR 按鈕</strong></li>
                <li><strong>允許相機權限</strong>（首次使用）</li>
                <li><strong>掃描平面</strong>：慢慢移動設備尋找地面或桌面</li>
                <li><strong>放置物件</strong>：看到白色圓圈時點擊</li>
                <li><strong>互動體驗</strong>：使用手勢縮放、旋轉物件</li>
            </ol>
        </div>

        <div class="info-card">
            <h3>⚠️ 技術限制</h3>
            <ul style="text-align: left; padding-left: 20px;">
                <li>僅支援靜態 USDZ 模型</li>
                <li>無法自定義 JavaScript 互動</li>
                <li>不支援即時動畫或粒子效果</li>
                <li>無法與 A-Frame 直接整合</li>
            </ul>
        </div>
    </div>

    <script>
        function updateDeviceInfo() {
            const deviceInfo = document.getElementById('device-info');
            const instructions = document.getElementById('instructions');
            const userAgent = navigator.userAgent;
            
            if (/iPad|iPhone|iPod/.test(userAgent)) {
                // iOS 設備
                const iosVersion = userAgent.match(/OS (\d+)_/);
                const version = iosVersion ? parseInt(iosVersion[1]) : 0;
                
                if (version >= 12) {
                    deviceInfo.innerHTML = '✅ iOS ' + version + ' - 支援 AR Quick Look';
                    instructions.innerHTML = '<strong>太棒了！</strong>您的設備支援完整的 AR 平面偵測功能。點擊上方按鈕開始體驗！';
                    deviceInfo.style.color = '#4ECDC4';
                } else {
                    deviceInfo.innerHTML = '⚠️ iOS ' + version + ' - 需要 iOS 12+';
                    instructions.innerHTML = '請更新到 iOS 12 或更新版本以體驗 AR 功能。';
                    deviceInfo.style.color = '#FFE066';
                }
            } else if (/Android/.test(userAgent)) {
                deviceInfo.innerHTML = '📱 Android 設備 - 不支援 AR Quick Look';
                instructions.innerHTML = 'AR Quick Look 是 iOS 專屬功能。Android 用戶請考慮使用 WebXR 或 AR.js 方案。';
                deviceInfo.style.color = '#FF6B6B';
                
                // 禁用按鈕
                const buttons = document.querySelectorAll('.ar-button');
                buttons.forEach(button => {
                    button.style.opacity = '0.5';
                    button.style.pointerEvents = 'none';
                    button.innerHTML += ' (不支援)';
                });
            } else {
                deviceInfo.innerHTML = '🖥️ 桌面瀏覽器 - 不支援 AR Quick Look';
                instructions.innerHTML = '請在 iOS 設備上的 Safari 瀏覽器中開啟此頁面以體驗 AR 功能。';
                deviceInfo.style.color = '#FF6B6B';
                
                // 禁用按鈕
                const buttons = document.querySelectorAll('.ar-button');
                buttons.forEach(button => {
                    button.style.opacity = '0.5';
                    button.style.pointerEvents = 'none';
                });
            }
        }

        // 監聽 AR 按鈕點擊
        document.addEventListener('DOMContentLoaded', function() {
            updateDeviceInfo();
            
            const arButtons = document.querySelectorAll('.ar-button');
            arButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const instructions = document.getElementById('instructions');
                    
                    if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
                        instructions.innerHTML = '<strong>🚀 AR 啟動中...</strong><br>請允許相機權限並尋找平面！';
                        instructions.style.color = '#4ECDC4';
                        
                        // 添加一些視覺反饋
                        button.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            button.style.transform = 'scale(1)';
                        }, 150);
                    } else {
                        e.preventDefault();
                        instructions.innerHTML = '❌ 此功能僅支援 iOS 設備！';
                        instructions.style.color = '#FF6B6B';
                    }
                });
            });
        });

        // 檢查 AR 支援
        if ('RelativeOrientationSensor' in window || 'AbsoluteOrientationSensor' in window) {
            console.log('Device supports orientation sensors');
        }
    </script>
</body>
</html>